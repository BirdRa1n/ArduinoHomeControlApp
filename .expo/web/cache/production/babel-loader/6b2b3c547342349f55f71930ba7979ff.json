{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import Color from'tinycolor2';import{useToken}from\"./useToken\";import{useAccessibleColors}from\"../core/color-mode/hooks\";import{useNativeBaseConfig}from\"../core/NativeBaseContext\";export function useContrastText(bg,color,disableContrastText){var _useToken=useToken('colors',['contrastThreshold','darkText','lightText',bg,color!==null&&color!==void 0?color:'']),_useToken2=_slicedToArray(_useToken,5),contrastThreshold=_useToken2[0],trueDarkText=_useToken2[1],trueLightText=_useToken2[2],trueBg=_useToken2[3],trueColor=_useToken2[4];var suppressColorAccessibilityWarning=useNativeBaseConfig('NativeBaseConfigProvider').config.suppressColorAccessibilityWarning;var _useAccessibleColors=useAccessibleColors(),_useAccessibleColors2=_slicedToArray(_useAccessibleColors,1),accessibleColors=_useAccessibleColors2[0];if(disableContrastText){return;}if(typeof bg!=='string'){return;}var _bg$split=bg.split('.'),_bg$split2=_slicedToArray(_bg$split,2),bgThemeColorVariant=_bg$split2[0],bgShade=_bg$split2[1];var textColor=!accessibleColors&&bgThemeColorVariant&&themeColorsThresholdShades[bgThemeColorVariant]?getContrastThemeColor(bgThemeColorVariant,bgShade):getAccessibleContrastColor(contrastThreshold,trueDarkText,trueLightText,trueBg,trueColor,bg,color,suppressColorAccessibilityWarning);return textColor;}function getContrastThemeColor(bgThemeColorVariant,bgShade){var shadeThreshold=themeColorsThresholdShades[bgThemeColorVariant];if(bgShade&&shadeThreshold&&(bgShade>=shadeThreshold&&bgThemeColorVariant!=='dark'||bgThemeColorVariant==='dark'&&bgShade<shadeThreshold)){return'lightText';}return'darkText';}function getAccessibleContrastColor(contrastThreshold,trueDarkText,trueLightText,trueBg,trueColor,bg,color,suppressColorAccessibilityWarning){if(typeof trueBg!=='string'){trueBg=bg;}var trueContrastColor;var contrastColorToken;var darkTextConstrast=getContrastRatio(trueBg,trueDarkText);var lightTextConstrast=getContrastRatio(trueBg,trueLightText);if(darkTextConstrast>=contrastThreshold||darkTextConstrast>lightTextConstrast){trueContrastColor=trueDarkText;contrastColorToken='darkText';}else{trueContrastColor=trueLightText;contrastColorToken='lightText';}if(process.env.NODE_ENV!=='production'){var contrast=getContrastRatio(trueBg,trueColor?trueColor:trueContrastColor);if(contrast<3&&!suppressColorAccessibilityWarning){console.warn([\"NativeBase: The contrast ratio of \".concat(contrast,\":1 for \").concat(color?color:contrastColorToken,\" on \").concat(bg),'falls below the WCAG recommended absolute minimum contrast ratio of 3:1.','https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-contrast'].join('\\n'));}}return contrastColorToken;}function getContrastRatio(foreground,background){var lumA=Color(foreground).getLuminance();var lumB=Color(background).getLuminance();return(Math.max(lumA,lumB)+0.05)/(Math.min(lumA,lumB)+0.05);}var themeColorsThresholdShades={rose:500,pink:500,fuchsia:800,purple:700,violet:600,indigo:500,blue:400,lightBlue:400,cyan:300,teal:300,emerald:300,tertiary:300,green:400,lime:600,yellow:800,amber:500,orange:500,red:500,warmGray:500,trueGray:500,gray:500,coolGray:500,blueGray:500,dark:500,danger:500,error:500,success:400,warning:500,muted:500,primary:500,info:400,secondary:500,light:500};","map":{"version":3,"sources":["useContrastText.ts"],"names":["useToken","color","suppressColorAccessibilityWarning","useNativeBaseConfig","useAccessibleColors","bg","textColor","themeColorsThresholdShades","getContrastThemeColor","getAccessibleContrastColor","shadeThreshold","bgShade","bgThemeColorVariant","trueBg","darkTextConstrast","getContrastRatio","lightTextConstrast","trueContrastColor","contrastColorToken","process","contrast","trueColor","console","lumA","Color","lumB","Math","rose","pink","fuchsia","purple","violet","indigo","blue","lightBlue","cyan","teal","emerald","tertiary","green","lime","yellow","amber","orange","red","warmGray","trueGray","gray","coolGray","blueGray","dark","danger","error","success","warning","muted","primary","info","secondary","light"],"mappings":"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","sourcesContent":["import Color from 'tinycolor2';\nimport { useToken } from './useToken';\nimport { useAccessibleColors } from '../core/color-mode/hooks';\nimport { useNativeBaseConfig } from '../core/NativeBaseContext';\n\nexport function useContrastText(\n  bg: string,\n  color?: string,\n  disableContrastText?: boolean\n) {\n  const [\n    contrastThreshold,\n    trueDarkText,\n    trueLightText,\n    trueBg,\n    trueColor,\n  ] = useToken('colors', [\n    'contrastThreshold',\n    'darkText',\n    'lightText',\n    bg,\n    color ?? '',\n  ]);\n\n  const suppressColorAccessibilityWarning = useNativeBaseConfig(\n    'NativeBaseConfigProvider'\n  ).config.suppressColorAccessibilityWarning;\n\n  const [accessibleColors] = useAccessibleColors();\n  if (disableContrastText) {\n    return;\n  }\n  if (typeof bg !== 'string') {\n    return;\n  }\n\n  const [bgThemeColorVariant, bgShade] = bg.split('.');\n\n  const textColor =\n    !accessibleColors &&\n    bgThemeColorVariant &&\n    themeColorsThresholdShades[bgThemeColorVariant]\n      ? getContrastThemeColor(bgThemeColorVariant, bgShade)\n      : getAccessibleContrastColor(\n          contrastThreshold,\n          trueDarkText,\n          trueLightText,\n          trueBg,\n          trueColor,\n          bg,\n          color,\n          suppressColorAccessibilityWarning\n        );\n\n  return textColor;\n}\n\nfunction getContrastThemeColor(bgThemeColorVariant: string, bgShade: string) {\n  const shadeThreshold = themeColorsThresholdShades[bgThemeColorVariant];\n  if (\n    bgShade &&\n    shadeThreshold &&\n    ((bgShade >= shadeThreshold && bgThemeColorVariant !== 'dark') ||\n      (bgThemeColorVariant === 'dark' && bgShade < shadeThreshold))\n  ) {\n    return 'lightText';\n  }\n  return 'darkText';\n}\nfunction getAccessibleContrastColor(\n  contrastThreshold: number,\n  trueDarkText: string,\n  trueLightText: string,\n  trueBg: string,\n  trueColor: string,\n  bg: string,\n  color?: string,\n  suppressColorAccessibilityWarning?: boolean\n) {\n  if (typeof trueBg !== 'string') {\n    trueBg = bg;\n  }\n  let trueContrastColor;\n  let contrastColorToken;\n  let darkTextConstrast = getContrastRatio(trueBg, trueDarkText);\n  let lightTextConstrast = getContrastRatio(trueBg, trueLightText);\n\n  if (\n    darkTextConstrast >= contrastThreshold ||\n    darkTextConstrast > lightTextConstrast\n  ) {\n    trueContrastColor = trueDarkText;\n    contrastColorToken = 'darkText';\n  } else {\n    trueContrastColor = trueLightText;\n    contrastColorToken = 'lightText';\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    const contrast = getContrastRatio(\n      trueBg,\n      trueColor ? trueColor : trueContrastColor\n    );\n    if (contrast < 3 && !suppressColorAccessibilityWarning) {\n      console.warn(\n        [\n          `NativeBase: The contrast ratio of ${contrast}:1 for ${\n            color ? color : contrastColorToken\n          } on ${bg}`,\n          'falls below the WCAG recommended absolute minimum contrast ratio of 3:1.',\n          'https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-contrast',\n        ].join('\\n')\n      );\n    }\n  }\n  return contrastColorToken;\n}\nfunction getContrastRatio(foreground: string, background: string) {\n  const lumA = Color(foreground).getLuminance();\n  const lumB = Color(background).getLuminance();\n  return (Math.max(lumA, lumB) + 0.05) / (Math.min(lumA, lumB) + 0.05);\n}\n\nconst themeColorsThresholdShades: any = {\n  rose: 500,\n  pink: 500,\n  fuchsia: 800,\n  purple: 700,\n  violet: 600,\n  indigo: 500,\n  blue: 400,\n  lightBlue: 400,\n  cyan: 300,\n  teal: 300,\n  emerald: 300,\n  tertiary: 300,\n  green: 400,\n  lime: 600,\n  yellow: 800,\n  amber: 500,\n  orange: 500,\n  red: 500,\n  warmGray: 500,\n  trueGray: 500,\n  gray: 500,\n  coolGray: 500,\n  blueGray: 500,\n  dark: 500,\n  danger: 500,\n  error: 500,\n  success: 400,\n  warning: 500,\n  muted: 500,\n  primary: 500,\n  info: 400,\n  secondary: 500,\n  light: 500,\n};\n"]},"metadata":{},"sourceType":"module"}